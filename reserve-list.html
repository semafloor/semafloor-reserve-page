<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="reserve-list-theme.html">

<link rel="import" href="../iron-list/iron-list.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<link rel="import" href="../paper-ripple/paper-ripple.html">

<dom-module id="reserve-list">
  <template>
    <style include="reserve-list-theme"></style>

    <iron-ajax id="listAjax"
      auto
      url="../json/[[name]]-booking.json"
      handle-as="json"
      last-response="{{_reservations}}"></iron-ajax>

    <!-- <div class="list-container"> -->
      <iron-list id="reserveList" items="[[_reservations]]">
        <template>
          <div class="reserve-item">
            <span>[[index]]</span>
            <span>[[item.room]]</span>
            <span>[[item.site]]</span>
            <span>[[item.period]]</span>
            <paper-ripple></paper-ripple>
          </div>
        </template>
      </iron-list>
    <!-- </div> -->
  </template>
  <script>
    Polymer({
      is: 'reserve-list',

      properties: {
        name: String,

        _reservations: {
          type: Object,
          value: function () {
            return [];
          }
        },

      },

      observers: [
        '_logResponse(_reservations)',
        '_logName(name)'
      ],

      _logResponse: function (_response) {
        console.log(_response);
      },

      _logName: function (_name) {
        console.log(_name);
      },

      updateList: function () {
        this.$.reserveList.fire('iron-resize');
      },

    });
  </script>
</dom-module>
